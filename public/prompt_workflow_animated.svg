<svg viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2563eb" />
    </marker>
    
    <!-- Gradient for flowing effect -->
    <linearGradient id="flowGradient">
      <stop offset="0%" stop-color="#6366f1" stop-opacity="0">
        <animate attributeName="stop-opacity" values="0;1;0" dur="2s" repeatCount="indefinite"/>
      </stop>
      <stop offset="50%" stop-color="#6366f1" stop-opacity="1">
        <animate attributeName="stop-opacity" values="1;0;1" dur="2s" repeatCount="indefinite"/>
      </stop>
      <stop offset="100%" stop-color="#6366f1" stop-opacity="0">
        <animate attributeName="stop-opacity" values="0;1;0" dur="2s" repeatCount="indefinite"/>
      </stop>
    </linearGradient>
  </defs>
  
  <!-- Title -->
  <text x="500" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#1f2937">
    Prompt Engineering Feedback Loop
    <animate attributeName="opacity" values="0;1" dur="0.5s" fill="freeze"/>
  </text>
  
  <!-- Phase Labels -->
  <text x="150" y="70" font-size="14" font-weight="600" text-anchor="middle" fill="#6b7280">
    DEVELOPMENT
    <animate attributeName="opacity" values="0;1" dur="0.5s" begin="0.5s" fill="freeze"/>
  </text>
  <text x="450" y="70" font-size="14" font-weight="600" text-anchor="middle" fill="#6b7280">
    DEPLOYMENT
    <animate attributeName="opacity" values="0;1" dur="0.5s" begin="2.5s" fill="freeze"/>
  </text>
  <text x="750" y="70" font-size="14" font-weight="600" text-anchor="middle" fill="#6b7280">
    MONITORING
    <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3.5s" fill="freeze"/>
  </text>
  
  <!-- Development Phase -->
  <g id="development">
    <!-- Write Prompt -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="1s" fill="freeze"/>
      <rect x="50" y="100" width="200" height="80" rx="8" fill="#dbeafe" stroke="#2563eb" stroke-width="2"/>
      <text x="150" y="130" font-size="14" font-weight="600" text-anchor="middle" fill="#1e40af">
        1. Write Interpolatable
      </text>
      <text x="150" y="150" font-size="14" font-weight="600" text-anchor="middle" fill="#1e40af">
        Prompt Template
      </text>
      <text x="150" y="170" font-size="11" text-anchor="middle" fill="#3b82f6">
        (versioned like code)
      </text>
    </g>
    
    <!-- Generate Dataset -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="1.5s" fill="freeze"/>
      <rect x="50" y="220" width="200" height="80" rx="8" fill="#dbeafe" stroke="#2563eb" stroke-width="2"/>
      <text x="150" y="245" font-size="14" font-weight="600" text-anchor="middle" fill="#1e40af">
        2. Generate Synthetic
      </text>
      <text x="150" y="265" font-size="14" font-weight="600" text-anchor="middle" fill="#1e40af">
        Dataset
      </text>
      <text x="150" y="285" font-size="11" text-anchor="middle" fill="#3b82f6">
        (toy browser interactions)
      </text>
    </g>
    
    <!-- Test & Iterate -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="2s" fill="freeze"/>
      <rect x="50" y="340" width="200" height="80" rx="8" fill="#dbeafe" stroke="#2563eb" stroke-width="2"/>
      <text x="150" y="360" font-size="14" font-weight="600" text-anchor="middle" fill="#1e40af">
        3. Evaluate Multiple
      </text>
      <text x="150" y="380" font-size="14" font-weight="600" text-anchor="middle" fill="#1e40af">
        LLM Configurations
      </text>
      <text x="150" y="400" font-size="14" font-weight="600" text-anchor="middle" fill="#1e40af">
        on Dataset
      </text>
    </g>
  </g>
  
  <!-- Deployment Phase -->
  <g id="deployment">
    <!-- Release -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="3s" fill="freeze"/>
      <rect x="350" y="220" width="200" height="80" rx="8" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
      <text x="450" y="245" font-size="14" font-weight="600" text-anchor="middle" fill="#047857">
        4. Release to
      </text>
      <text x="450" y="265" font-size="14" font-weight="600" text-anchor="middle" fill="#047857">
        Production
      </text>
      <text x="450" y="285" font-size="11" text-anchor="middle" fill="#10b981">
        (gradual rollout)
      </text>
      
      <!-- Rollback Safety -->
      <rect x="380" y="320" width="140" height="40" rx="6" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
      <text x="450" y="345" font-size="12" text-anchor="middle" fill="#92400e">
        ↩️ Rollback Safety
      </text>
    </g>
  </g>
  
  <!-- Monitoring Phase -->
  <g id="monitoring">
    <!-- Langfuse Monitoring -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="4s" fill="freeze"/>
      <rect x="650" y="100" width="200" height="100" rx="8" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
      <text x="750" y="125" font-size="14" font-weight="600" text-anchor="middle" fill="#be185d">
        5. Langfuse Monitoring
      </text>
      <text x="750" y="150" font-size="12" text-anchor="middle" fill="#db2777">
        • Inputs/Outputs
      </text>
      <text x="750" y="170" font-size="12" text-anchor="middle" fill="#db2777">
        • Scores &amp; Traces
      </text>
      <text x="750" y="190" font-size="12" text-anchor="middle" fill="#db2777">
        • Real-time tracking
      </text>
    </g>
    
    <!-- Trace Issues -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="4.5s" fill="freeze"/>
      <rect x="650" y="240" width="200" height="80" rx="8" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
      <text x="750" y="265" font-size="14" font-weight="600" text-anchor="middle" fill="#be185d">
        6. Trace Production
      </text>
      <text x="750" y="285" font-size="14" font-weight="600" text-anchor="middle" fill="#be185d">
        Failures
      </text>
      <text x="750" y="305" font-size="11" text-anchor="middle" fill="#db2777">
        (exact input/output)
      </text>
    </g>
    
    <!-- Add to Dataset -->
    <g opacity="0">
      <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5s" fill="freeze"/>
      <rect x="650" y="360" width="200" height="80" rx="8" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
      <text x="750" y="385" font-size="14" font-weight="600" text-anchor="middle" fill="#be185d">
        7. Add Real Examples
      </text>
      <text x="750" y="405" font-size="14" font-weight="600" text-anchor="middle" fill="#be185d">
        to Dataset
      </text>
      <text x="750" y="425" font-size="11" text-anchor="middle" fill="#db2777">
        (production failures)
      </text>
    </g>
  </g>
  
  <!-- Animated Arrows -->
  <!-- Development flow arrow 1-2 -->
  <path d="M 150 180 L 150 220" stroke="#2563eb" stroke-width="2" fill="none" marker-end="url(#arrowhead-blue)" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.3s" begin="1.5s" fill="freeze"/>
    <animate attributeName="stroke-dasharray" values="0,40;40,0" dur="0.5s" begin="1.5s" fill="freeze"/>
    <animate attributeName="stroke-dashoffset" values="40;0" dur="0.5s" begin="1.5s" fill="freeze"/>
  </path>
  
  <!-- Development flow arrow 2-3 -->
  <path d="M 150 300 L 150 340" stroke="#2563eb" stroke-width="2" fill="none" marker-end="url(#arrowhead-blue)" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.3s" begin="2s" fill="freeze"/>
    <animate attributeName="stroke-dasharray" values="0,40;40,0" dur="0.5s" begin="2s" fill="freeze"/>
    <animate attributeName="stroke-dashoffset" values="40;0" dur="0.5s" begin="2s" fill="freeze"/>
  </path>
  
  <!-- To deployment arrow 3-4 -->
  <path d="M 250 380 L 350 260" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.3s" begin="2.5s" fill="freeze"/>
    <animate attributeName="stroke-dasharray" values="0,150;150,0" dur="0.5s" begin="2.5s" fill="freeze"/>
    <animate attributeName="stroke-dashoffset" values="150;0" dur="0.5s" begin="2.5s" fill="freeze"/>
  </path>
  
  <!-- To monitoring arrow 4-5 -->
  <path d="M 550 260 L 650 150" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.3s" begin="3.5s" fill="freeze"/>
    <animate attributeName="stroke-dasharray" values="0,150;150,0" dur="0.5s" begin="3.5s" fill="freeze"/>
    <animate attributeName="stroke-dashoffset" values="150;0" dur="0.5s" begin="3.5s" fill="freeze"/>
  </path>
  
  <!-- Monitoring flow arrow 5-6 -->
  <path d="M 750 200 L 750 240" stroke="#ec4899" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.3s" begin="4.5s" fill="freeze"/>
    <animate attributeName="stroke-dasharray" values="0,40;40,0" dur="0.5s" begin="4.5s" fill="freeze"/>
    <animate attributeName="stroke-dashoffset" values="40;0" dur="0.5s" begin="4.5s" fill="freeze"/>
  </path>
  
  <!-- Monitoring flow arrow 6-7 -->
  <path d="M 750 320 L 750 360" stroke="#ec4899" stroke-width="2" fill="none" marker-end="url(#arrowhead)" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.3s" begin="5s" fill="freeze"/>
    <animate attributeName="stroke-dasharray" values="0,40;40,0" dur="0.5s" begin="5s" fill="freeze"/>
    <animate attributeName="stroke-dashoffset" values="40;0" dur="0.5s" begin="5s" fill="freeze"/>
  </path>
  
  <!-- Feedback loop from 7 back to 3 (with pulsing animation) -->
  <path d="M 650 400 L 300 400 L 300 380 L 250 380" stroke="#6366f1" stroke-width="3" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="8,4" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5.5s" fill="freeze"/>
    <animate attributeName="stroke-width" values="3;4;3" dur="2s" begin="6s" repeatCount="indefinite"/>
    <animate attributeName="stroke-dashoffset" values="0;-12" dur="1s" begin="5.5s" repeatCount="indefinite"/>
  </path>
  
  <!-- Legend -->
  <g id="legend" opacity="0">
    <animate attributeName="opacity" values="0;1" dur="0.5s" begin="5.5s" fill="freeze"/>
    <rect x="350" y="500" width="15" height="15" fill="#dbeafe" stroke="#2563eb" stroke-width="1.5"/>
    <text x="370" y="512" font-size="12" fill="#4b5563">Development</text>
    
    <rect x="350" y="525" width="15" height="15" fill="#d1fae5" stroke="#10b981" stroke-width="1.5"/>
    <text x="370" y="537" font-size="12" fill="#4b5563">Deployment</text>
    
    <rect x="350" y="550" width="15" height="15" fill="#fce7f3" stroke="#ec4899" stroke-width="1.5"/>
    <text x="370" y="562" font-size="12" fill="#4b5563">Monitoring</text>
  </g>
</svg>